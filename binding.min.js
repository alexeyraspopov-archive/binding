!function(a){"use strict";function b(a){var b,c,d=[],e=a.getElementsByTagName("*");for(b=0,c=e.length;c>b;b++)d.push(e[b]);return d}var c={},d={};c.adapter={watch:function(){throw new Error("You should declare binding adapter")},unwatch:function(){throw new Error("You should declare binding adapter")},read:function(a,b){return a[b]},publish:function(a,b,c){a[b]=c}},c.apply=function(a,c){var e,f,g,h=b(c),i=[];for(g=function(a,b){var c=a.dataset[b].split(/\s*\|\s*/);return a.dataset[b]=c[0],c.slice(1)},f=function(c){var e,f,h,j;if(-1===i.indexOf(c))for(e=Object.keys(c.dataset),f=0;f<e.length;f++)h=d[e[f]],j=g(c,e[f]),console.log(j),h&&(h.scoped&&(i=i.concat(b(c))),h(c,a,c.dataset,j))},e=0;e<h.length;e++)f(h[e])},c.directive=function(a,b,c){d[a]=b,b.scoped=c},a("binding",c),c.directive("bind",function(a,b,d){c.adapter.watch(b,d.bind,function(b){a.textContent=b})}),c.directive("html",function(a,b,d){c.adapter.watch(b,d.bind,function(b){a.innerHTML=b})}),c.directive("click",function(a,b,d){a.addEventListener("click",function(){c.adapter.publish(b,d.click)})}),c.directive("model",function(a,b,d){var e="text"===a.type?"value":"checked";c.adapter.watch(b,d.model,function(b){a[e]=b}),a.addEventListener("change",function(){c.adapter.publish(b,d.model,a[e])})}),c.directive("class",function(a,b,d){var e,f,g,h=d.class.split(/\s*,\s*/);for(g=function(d,e){c.adapter.watch(b,e,function(b){b=!!b,b?a.classList.add(d):a.classList.remove(d)})},e=0;e<h.length;e++)f=h[e].match(/^(.+):\s*(.+)$/),g(f[1],f[2])}),c.directive("repeat",function(a,b,d){var e=document.createComment(" repeat: "+d.repeat+" "),f=d.repeat.match(/^(.+)\s+in\s+(.+)$/),g=f[1],h=f[2],i=c.adapter.read(b,h),j=[],k=a.parentNode,l=[],m=0;k.insertBefore(e,a),k.removeChild(a),c.adapter.watch(b,function(){var a;if(i.length!==l.length)return++m;for(a=0;a<i.length;a++)if(i[a]!==l[a])return++m},function(){var d,f,h,m,n=[];for(d=0;d<l.length;d++)-1===i.indexOf(l[d])&&n.push(l[d]);for(d=0;d<n.length;d++)m=l.indexOf(n[d]),k.removeChild(j[m]),l.splice(m,1),j.splice(m,1);for(d=0;d<i.length;d++)l.indexOf(i[d])>-1||(f=a.cloneNode(!0),h=Object.create(b),h[g]=i[d],c.apply(h,f),k.insertBefore(f,e.nextElementSibling),j.push(f),l.push(i[d]))})},!0)}(function(a,b){"function"==typeof define&&define.amd?define(function(){return b}):"object"==typeof window?window[a]=b:module.exports=b});